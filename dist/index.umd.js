!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("@hotwired/stimulus"),require("@kanety/stimulus-static-actions")):"function"==typeof define&&define.amd?define(["@hotwired/stimulus","@kanety/stimulus-static-actions"],t):(e||self).StimulusMenu=t(e.Stimulus)}(this,function(e){class t extends e.Controller{get rootItems(){return Array.from(this.element.children).filter(e=>e.matches("li"))}get items(){return this.rootItems.flatMap(e=>this.findDescendants(e))}get isActive(){return null!=this.items.find(e=>this.isOpened(e))}toggle(e){if(this.isToggleElement(e.target)){var t=e.target.closest("li");t&&this.hasMenu(t)?(this.isOpened(t)?this.closeItem(t):(this.openItemsFrom(t),e.target.focus()),e.preventDefault()):this.keepOpenValue||this.closeAllItems()}}open(e){if(this.isToggleElement(e.target)){var t=e.target.closest("li");t&&this.hasMenu(t)&&((this.isActive||this.autoOpenValue)&&(this.openItemsFrom(t),e.target.focus()),e.preventDefault())}}closeAll(e){this.element.contains(e.target)||this.closeAllItems()}enable(e){var t=e.target.closest("li");this.findDescendants(t).forEach(e=>this.enableItem(e))}disable(e){var t=e.target.closest("li");this.findDescendants(t).forEach(e=>this.disableItem(e))}isToggleElement(e){return e.matches(this.toggleElementValue)}hasMenu(e){return 0!=this.findChildMenus(e).length}isOpened(e){return e.matches(".st-menu--opened")}isClosed(e){return!this.isOpened(e)}openItemsFrom(e){var t=this.findAscendants(e).concat([e]);this.items.forEach(e=>{t.includes(e)||this.closeItem(e)}),t.forEach(e=>this.openItem(e))}closeAllItems(){this.items.forEach(e=>this.closeItem(e))}openItem(e){e&&this.isClosed(e)&&this.hasMenu(e)&&this.element.contains(e)&&(e.classList.add("st-menu--opened"),this.dispatch("opened",{detail:{item:e}}))}closeItem(e){e&&this.isOpened(e)&&this.hasMenu(e)&&this.element.contains(e)&&(e.classList.remove("st-menu--opened"),this.dispatch("closed",{detail:{item:e}}))}enableItem(e){e.classList.remove("st-menu__item--disabled"),this.findContents(e).forEach(e=>{[e,...e.querySelectorAll("*")].forEach(e=>{e.matches("a")?e.tabIndex=null:e.matches("input, textarea, select, button")&&(e.disabled=!1)})})}disableItem(e){e.classList.add("st-menu__item--disabled"),this.findContents(e).forEach(e=>{[e,...e.querySelectorAll("*")].forEach(e=>{e.matches("a")?e.tabIndex="-1":e.matches("input, textarea, select, button")&&(e.disabled=!0)})})}findChildMenus(e){return Array.from(e.children).filter(e=>e.matches("ul"))}findAscendants(e){var t,s=null==(t=e.parentNode)?void 0:t.parentNode;return s&&this.scope.containsElement(s)?this.findAscendants(s).concat([e]):[e]}findDescendants(e){return[e].concat(this.findChildren(e).flatMap(e=>this.findDescendants(e)))}findChildren(e){return this.findChildMenus(e).flatMap(e=>Array.from(e.children).filter(e=>e.matches("li")))}findContents(e){return Array.from(e.children).filter(e=>!e.matches("ul"))}}return t.values={autoOpen:{type:Boolean,default:!1},keepOpen:{type:Boolean,default:!1},toggleElement:{type:String,default:"a"}},t.actions=[["element","click->toggle"],["element","click@window->closeAll"],["element","mouseover->open"]],t});
//# sourceMappingURL=index.umd.js.map

import{Controller as e}from"@hotwired/stimulus";import"@kanety/stimulus-static-actions";class s extends e{get menus(){return this.scope.findAllElements("ul")}get isActive(){return null!=this.scope.findElement(".st-menu--opened")}toggle(e){var s=e.target.closest("li");s&&this.hasMenu(s)?(this.isOpened(s)?this.findChildMenus(s).forEach(e=>this.closeMenu(e)):(this.openMenus(s),e.target.focus()),e.preventDefault()):this.keepOpenValue||this.closeAllMenus()}open(e){var s=e.target.closest("li");s&&this.hasMenu(s)&&((this.isActive||this.autoOpenValue)&&(this.openMenus(s),e.target.focus()),e.preventDefault())}closeAll(e){this.element.contains(e.target)||this.closeAllMenus()}hasMenu(e){return 0!=this.findChildMenus(e).length}isOpened(e){return e.matches(".st-menu--opened")}isClosed(e){return!this.isOpened(e)}openMenus(e){var s=this.findAscMenus(e).concat(this.findChildMenus(e));this.menus.forEach(e=>{s.includes(e)||this.closeMenu(e)}),s.forEach(e=>this.openMenu(e))}closeAllMenus(){this.menus.forEach(e=>this.closeMenu(e))}openMenu(e){var s=e.parentNode;s&&this.isClosed(s)&&this.element.contains(s)&&s.classList.add("st-menu--opened")}closeMenu(e){var s=e.parentNode;s&&this.isOpened(s)&&this.element.contains(s)&&s.classList.remove("st-menu--opened")}findAscMenus(e){var s=e.parentNode;return s==this.element?[s]:s&&s.parentNode?this.findAscMenus(s.parentNode).concat([s]):[]}findChildMenus(e){return Array.from(e.children).filter(e=>e.matches("ul"))}}s.values={autoOpen:{type:Boolean,default:!1},keepOpen:{type:Boolean,default:!1}},s.actions=[["element","click->toggle"],["element","click@window->closeAll"],["element","mouseover->open"]];export{s as default};
//# sourceMappingURL=index.module.mjs.map
